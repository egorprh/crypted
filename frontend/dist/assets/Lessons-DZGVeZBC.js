import{d as g,f as v,a as N,c,j as s,L as k,H as w,e as C,A as I}from"./index-BduiCrXO.js";import{B as T}from"./BackIcon-DSoigt8H.js";import{h as b}from"./handleImageError-DYzZusFE.js";import{C as E}from"./ContentNotFound-DTkdQWjg.js";import{T as L}from"./TImerIcon-BjV19Lux.js";function D({user:S}){const j=g(),{courseId:o}=v(),{data:n,loading:i,error:l}=N(),[r,d]=c.useState([]),[f,m]=c.useState(""),[h,u]=c.useState(""),[t,p]=c.useState([]);return c.useEffect(()=>{if(!i&&n){const e=(n.courses||[]).find(x=>String(x.id)===o);e?(m(e.title),u(e.description),p(e.access_time),d(e.lessons)):(console.warn("Курс не найден"),d([]),m(""),u(""))}},[n,i,o]),l?s.jsxs("div",{className:"error",children:["Ошибка: ",l]}):s.jsxs("div",{className:"page-container content",children:[s.jsxs("div",{className:"back-link-wrapper",children:[s.jsxs(k,{to:"/",className:"back-link",children:[s.jsx(T,{}),"Назад"]}),t!=null&&t!==-1&&s.jsx("div",{className:"access-timer",children:s.jsxs("div",{className:"access-timer-count",children:[s.jsx(L,{}),(()=>{const a=Math.ceil(t/24),e=new Intl.PluralRules("ru-RU");return`${a} ${{one:"день",few:"дня",many:"дней",other:"дня"}[e.select(a)]}`})()]})})]}),s.jsxs("div",{className:"welcome",children:[s.jsx(w,{title:f,svg:s.jsx(C,{})}),s.jsx("p",{className:"text-gray-300",children:h})]}),r!=null&&r.length?r==null?void 0:r.map((a,e)=>s.jsxs("div",{className:"lesson-block",children:[s.jsxs("div",{className:"badge lesson-badge",children:["Урок ",e+1]}),s.jsxs("div",{className:"lesson-card",onClick:()=>j(`/lessons/${o}/${a.id}/content`),children:[s.jsxs("div",{className:"info",children:[s.jsx("img",{src:a.image||"/images/default-event.png",alt:"",onError:b()}),s.jsx("span",{children:a.title})]}),s.jsx("div",{className:"arrow",children:s.jsx(I,{})})]})]},a.id)):s.jsx(E,{message:"Уроки не найдены"})]})}export{D as default};
