import{f as k,d as v,a as I,c as n,j as s,L as w}from"./index-9enGk7kT.js";import{B as C}from"./BackIcon-Dim3ipap.js";/* empty css                         *//* empty css                     */import{C as y}from"./ContentNotFound-DBiIoHJE.js";function L({user:r}){const{quizId:l}=k(),o=v(),{data:t}=I(),[u,p]=n.useState([]),[m,j]=n.useState(null),[x,f]=n.useState(null),[z,N]=n.useState(null),g=r!=null&&r.id?r.id:0;n.useEffect(()=>{if(t!=null&&t.courses){const e=t.courses.flatMap(i=>i.lessons).find(i=>i.quizzes.find(c=>c.id===Number(l)));e?(j(e.course_id),f(e.id)):o(`/lessons/${e.course_id}/${e.id}`)}if(t!=null&&t.homework){const e=t.homework.find(i=>i.quiz_id===Number(l));e?(p((e==null?void 0:e.questions)||[]),N(e.progress)):(console.error("Не найдено домашнее задание для этого quizId"),o("/homework"))}},[t,g,l,o]);const q=()=>{m&&x&&o(`/lessons/${m}/${x}/quiz`)};return s.jsxs("div",{className:"content quiz-results-content",children:[s.jsxs(w,{to:"/homework",className:"back-link",children:[s.jsx(C,{}),"Назад"]}),s.jsx("div",{className:"quiz-progress-summary",children:s.jsxs("p",{className:"progress-text",children:["Ваш результат: ",z,"% правильных ответов!"]})}),s.jsx("h1",{children:"Ваши ответы"}),s.jsxs("div",{className:"quiz",children:[u.length?u.map((e,i)=>{var c;return s.jsxs("div",{className:"quiz-question",children:[s.jsxs("h2",{children:[i+1,". ",e.text]}),e.type==="text"?s.jsx("div",{className:"quiz-text-answer",children:s.jsxs("div",{className:"text-answer-display",children:[s.jsx("strong",{children:"Ваш ответ:"}),s.jsx("p",{children:((c=e.answers[0])==null?void 0:c.text)||"Ответ не найден"})]})}):s.jsx("div",{className:"quiz-answers",children:e.answers.map(a=>{const b=a.correct,h=a.user_answer;let d="";return b?d="correct":h&&(d="incorrect"),s.jsxs("label",{className:`quiz-answer ${d}`,children:[s.jsx("input",{type:"radio",checked:h,disabled:!0,readOnly:!0}),a.text]},a.id)})})]},e.id)}):s.jsx(y,{message:"Не удалось загрузить результаты теста"}),s.jsx("button",{className:"btn btn-accent btn-p12",onClick:q,children:"Пройти заново"})]})]})}export{L as default};
