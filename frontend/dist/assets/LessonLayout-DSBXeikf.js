import{j as e,f as k,d as C,u as L,a as S,c as d,O as z}from"./index-cSVua3Tt.js";import{B}from"./BackIcon-CU__bPNG.js";const E=({buttons:t,activeTab:n,onTabChange:r})=>e.jsx("div",{className:"tabs",children:t.map(a=>e.jsx("button",{className:n===a.value?"active":"",onClick:()=>r(a.value),children:a.label},a.value))}),$=[{label:"Контент",value:"content"},{label:"Материал",value:"materials"},{label:"Домашка",value:"quiz"}],q={btns:$};function O(){const{courseId:t,lessonId:n}=k(),r=C(),a=L(),{data:f,loading:v,error:x}=S(),[m,p]=d.useState(null),[i,b]=d.useState(""),g=a.pathname.split("/"),h=g[g.length-1];if(d.useEffect(()=>{var s,u;if(!v&&f){const o=(s=f.courses)==null?void 0:s.find(c=>String(c.id)===t),l=(u=o==null?void 0:o.lessons)==null?void 0:u.find(c=>String(c.id)===n);l?p(l):console.error("Урок не найден")}},[f,v,t,n]),d.useEffect(()=>{h&&h!==i&&b(h)},[a.pathname,i]),x)return e.jsxs("div",{className:"page-container content",children:["Ошибка: ",x]});if(!m)return e.jsx("div",{className:"page-container content",children:"Урок не найден"});const j={lesson:m,courseId:t,lessonId:n},N=s=>{s!==i&&(b(s),r(`/lessons/${t}/${n}/${s}`))},T=(s,u)=>u.filter(o=>{var l,c;switch(o.value){case"materials":return((l=s.materials)==null?void 0:l.length)>0;case"quiz":return((c=s.quizzes)==null?void 0:c.length)>0;default:return!0}});return e.jsxs("div",{className:"content",children:[e.jsxs("div",{onClick:()=>r(`/lessons/${t}`),className:"back-link",children:[e.jsx(B,{}),"Назад"]}),e.jsx(E,{buttons:T(m,q.btns),activeTab:i,onTabChange:N}),e.jsx(z,{context:j})]})}export{O as default};
