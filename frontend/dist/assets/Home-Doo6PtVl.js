import{j as s,c as f,a as w,b as _,r as m,H as b,A as h,d as y}from"./index-CRjUz0L_.js";/* empty css              */import{C}from"./ContentNotFound-CjwG4T28.js";import{M as k}from"./Modal-DXU7GU_0.js";import{L as A}from"./LockIcon-cZ4_gSG6.js";import{L as x}from"./LabelIcon-Cuax8djz.js";function H(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",children:s.jsx("path",{d:"M2.25 1.875a1.875 1.875 0 1 1 3.75 0 1.875 1.875 0 1 1 3.75 0v.004c0 .053 0 .203-.028.371h1.528A.75.75 0 0 1 12 3v.75a.75.75 0 0 1-.75.75H.75A.75.75 0 0 1 0 3.75V3a.75.75 0 0 1 .75-.75h1.529a2.226 2.226 0 0 1-.029-.37v-.005Zm.801.375H5.25v-.375a1.125 1.125 0 1 0-2.25 0c0 .064.002.205.034.322.004.018.01.036.017.053Zm3.699 0h2.199a.419.419 0 0 0 .017-.053C9 2.08 9 1.94 9 1.875a1.125 1.125 0 0 0-2.25 0v.375Zm4.5 3v5.625A1.125 1.125 0 0 1 10.125 12H6.75V5.25h4.5ZM1.875 12A1.125 1.125 0 0 1 .75 10.875V5.25h4.5V12H1.875Z"})})}function D(){var p;const l=f(),{data:a,loading:j,error:t,user:c}=w(),{surveyPassed:n}=_(),[I,d]=m.useState(!1),[r,o]=m.useState(null),u=(c==null?void 0:c.id)||0,g=e=>{if(a!=null&&a.enter_survey&&!n){d(!0),setTimeout(()=>d(!1),1e3);return}fetch("/api/course_viewed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({courseId:e.id,userId:u})}).catch(console.error),e.direct_link?window.open(e.direct_link,"_blank"):l(`/lessons/${e.id}`)},v=e=>{const i={popup_title:"Бесплатный доступ в торговую группу",popup_desc:"Каждый кто пройдёт все 10 уроков, получит доступ в нашу торговую группу на 5 дней бесплатно.",popup_img:"images/giftImage.svg"};o({title:e.popup_title||i.popup_title,desc:e.popup_desc||i.popup_desc,img:e.popup_img||i.popup_img})},N=()=>{o(null)};return t?s.jsxs("div",{className:"error",children:["Ошибка: ",t]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"courses-wrapper content main-content",children:[s.jsx(b,{}),s.jsxs("section",{className:"courses",children:[(a==null?void 0:a.enter_survey)&&!n&&s.jsxs("div",{className:"card white-header-card survey-banner",onClick:()=>l("/lessons/enter-survey"),children:[s.jsx("div",{className:"card-header",children:s.jsx("img",{src:"/images/logo-primary.png",alt:"Course",className:"logo"})}),s.jsxs("div",{className:"card-body",children:[s.jsx("div",{className:"d-flex card-title-wrapper",children:s.jsx("p",{className:"card-title",children:"Входное тестирование"})}),s.jsx("p",{className:"card-text",children:"Прежде чем начать обучение, необходимо пройти тест, который определит твой уровень в трейдинге."}),s.jsxs("div",{className:"card-footer",children:[s.jsxs("div",{className:"tag",children:[s.jsx("div",{className:"tag-img",children:s.jsx(x,{})}),s.jsx("span",{className:"new-price",children:"Бесплатно"})]}),s.jsxs("span",{className:"btn btn-white btn-flex",children:["Начать",s.jsx(h,{})]})]})]})]}),j?s.jsx("div",{className:"loading",children:"Загрузка курсов..."}):(p=a==null?void 0:a.courses)!=null&&p.length?a.courses.map(e=>s.jsxs("div",{className:"course-card",onClick:()=>g(e),children:[s.jsx("div",{className:"course-header",children:s.jsx("img",{src:e.image||"/images/default-event.png",alt:"Course",className:"course-header-img"})}),s.jsxs("div",{className:"course-body",children:[s.jsxs("div",{className:"d-flex course-title-wrapper card-title-wrapper",children:[s.jsx("p",{className:"course-title",children:e.title}),s.jsxs("div",{className:"tag",children:[(e.newprice||e.oldprice)&&s.jsx("div",{className:"tag-img",children:s.jsx(x,{})}),e.oldprice&&s.jsx("span",{className:"old-price",children:e.oldprice}),e.newprice&&s.jsx("span",{className:"new-price",children:e.newprice})]})]}),s.jsx("div",{className:"course-description",children:e.description}),s.jsxs("div",{className:"course-footer",children:[e.has_popup&&s.jsxs("div",{className:"btn icon gift-btn",onClick:i=>{i.stopPropagation(),v(e)},children:[s.jsx("div",{className:"gift-icon-wrapper",children:s.jsx(H,{})}),"Подарок от dept."]}),s.jsxs("span",{className:"start-btn btn",children:[s.jsx("span",{className:"logo-icon-wrapper",children:s.jsx(y,{})}),"Начать курс",s.jsx(h,{})]})]})]}),s.jsx("hr",{})]},e.id)):s.jsx(C,{message:"Курсы не найдены"})]})]}),(a==null?void 0:a.enter_survey)&&!n&&s.jsx("div",{"data-blur":"true",children:s.jsx(A,{})}),r&&s.jsx(k,{onClose:N,children:s.jsxs("div",{className:"popup-content",children:[s.jsx("img",{src:r.img,alt:"Подарок",className:"popup-image"}),s.jsx("h3",{children:r.title}),s.jsx("p",{children:r.desc})]})})]})}export{D as default};
