# Тесты для функционала времени доступа к курсам

## Описание

Этот набор тестов проверяет функциональность работы с записями пользователей на курсы, включая:

- Создание записей при первом входе в курс
- Проверку и обновление статуса записей при истечении времени доступа
- Корректность работы констант статусов подписки

## Запуск тестов

### Запуск всех тестов
```bash
python tests/run_tests.py
```

### Запуск конкретного теста
```bash
python -m unittest tests.test_enrollment.TestEnrollmentFunctions.test_create_user_enrollment_new_enrollment
```

### Запуск с подробным выводом
```bash
python -m unittest tests.test_enrollment -v
```

## Структура тестов

### test_enrollment_simple.py
Содержит простые unit тесты для:
- Константы статусов подписки
- Логика вычисления времени доступа
- Структура данных записи пользователя на курс
- Валидация входных данных

### test_enrollment.py
Содержит асинхронные unit тесты для функций:
- `create_user_enrollment()` - создание записи пользователя на курс
- `update_user_enrollment()` - обновление статуса записи при истечении времени
- `get_course_access_info()` - получение информации о времени доступа и статусе записи

## Особенности

- Тесты работают без поднятия базы данных и бэкенда
- Используются моки для имитации работы с базой данных
- Все функции покрыты позитивными и негативными сценариями
- Тесты проверяют обработку исключений

## Требования

- Python 3.7+
- unittest (входит в стандартную библиотеку Python)
- Модули из backend/ (импортируются автоматически)
