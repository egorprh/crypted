# –ò–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —É—Ä–æ–∫–æ–≤

## –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

–î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —É—Ä–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ —É—Ä–æ–∫–∞–º –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —É—Ä–æ–∫–æ–≤.

### –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞:
1. **–ï—Å–ª–∏ –≤ —É—Ä–æ–∫–µ –µ—Å—Ç—å –∑–∞–¥–∞–Ω–∏–µ –∏ –æ–Ω–æ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ** - —É—Ä–æ–∫ —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º
2. **–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –∫–ª—é—á `blocked` —Ä–∞–≤–µ–Ω `true`**, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ –ø–µ—Ä–≤—ã–π —É—Ä–æ–∫ –∫—É—Ä—Å–∞
3. **–í—Å–µ —É—Ä–æ–∫–∏ –∫–æ—Ç–æ—Ä—ã–µ –∏–¥—É—Ç –ø–æ—Å–ª–µ —Ç–æ–∂–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å `blocked = true`**
4. **–ï—Å–ª–∏ —É —É—Ä–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞–Ω–∏—è, —Ç–æ –æ–Ω —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º –∫–æ–≥–¥–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω**

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–∞—Ö

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **`backend/db/init.sql`**: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `lesson_completions` –¥–ª—è —Ñ–∏–∫—Å–∞—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–∫–æ–≤
- **`backend/admin/models.py`**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å `LessonCompletion` –¥–ª—è –∞–¥–º–∏–Ω–∫–∏
- **`backend/db/models.py`**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å `LessonCompletion` –¥–ª—è API

### 2. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (`backend/misc.py`)
–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏:

- **`mark_lesson_completed(user_id, lesson_id, db)`** - –æ—Ç–º–µ—á–∞–µ—Ç —É—Ä–æ–∫ –∫–∞–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π
- **`is_lesson_completed_by_user(user_id, lesson_id, db)`** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —É—Ä–æ–∫–∞:
  - –ï—Å–ª–∏ –µ—Å—Ç—å –∑–∞–¥–∞–Ω–∏—è: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∑–∞–ø–∏—Å–∏ –≤ `lesson_completions` (–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞)
  - –ï—Å–ª–∏ –Ω–µ—Ç –∑–∞–¥–∞–Ω–∏–π: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∑–∞–ø–∏—Å–∏ –≤ `lesson_completions` (–ø—Ä–æ—Å–º–æ—Ç—Ä)
- **`get_previous_lesson(course_id, current_sort_order, db)`** - –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–π —É—Ä–æ–∫
- **`check_lesson_blocked(user_id, lesson, course, db)`** - —É–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

### 3. API endpoints (`backend/main.py`)
- –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π endpoint `/api/lesson_viewed` –¥–ª—è –∑–∞–ø–∏—Å–∏ —Å–æ–±—ã—Ç–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —É—Ä–æ–∫–∞
- –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω –º–µ—Ç–æ–¥ `get_app_data` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª—é—á–∞ `blocked` –∫ –∫–∞–∂–¥–æ–º—É —É—Ä–æ–∫—É
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–∏ `check_lesson_blocked`
- –û–±–Ω–æ–≤–ª–µ–Ω endpoint `/api/save_attempt` –¥–ª—è –∑–∞–ø–∏—Å–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ç–µ—Å—Ç–∞
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–∏ `mark_lesson_completed`
- **–õ–æ–≥–∏–∫–∞ `/api/lesson_viewed`**: –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è —É—Ä–æ–∫–æ–≤ –ë–ï–ó –∑–∞–¥–∞–Ω–∏–π

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **`tests/test_lesson_completion.py`**: –°–æ–∑–¥–∞–Ω –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –Ω–∞–±–æ—Ä —é–Ω–∏—Ç —Ç–µ—Å—Ç–æ–≤
  - –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
  - –¢–µ—Å—Ç –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
  - –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–∫–æ–≤ —Å –∑–∞–¥–∞–Ω–∏—è–º–∏
  - –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–∫–æ–≤ –±–µ–∑ –∑–∞–¥–∞–Ω–∏–π
  - –¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
  - –¢–µ—Å—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–∫–∞ (sort_order = 1)
  - –¢–µ—Å—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–Ω–æ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–∏
  - –¢–µ—Å—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–º/–Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–º —É—Ä–æ–∫–µ

### 5. –ê–¥–º–∏–Ω–∫–∞
- **`backend/admin/views.py`**: –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ `LessonCompletionAdmin` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è–º–∏
- **`backend/admin/admin_setup.py`**: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ –Ω–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω–∫–µ

### 6. –§—Ä–æ–Ω—Ç–µ–Ω–¥
- **`frontend/src/components/Lessons/Lessons.jsx`**:
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `goToLesson()` –¥–ª—è –∑–∞–ø–∏—Å–∏ —Å–æ–±—ã—Ç–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —É—Ä–æ–∫–∞
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É—Ä–æ–∫–æ–≤
  - –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–∏–ª–∏ –¥–ª—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É—Ä–æ–∫–æ–≤
- **`frontend/src/components/Lessons/lessons.css`**: –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–∏–ª–∏ –¥–ª—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É—Ä–æ–∫–æ–≤
- **`frontend/src/components/Lesson/Lesson.jsx`**: –£–ø—Ä–æ—â–µ–Ω, –æ—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∞ "–î–∞–ª–µ–µ"
- **`frontend/src/components/LessonMaterials/LessonMaterials.jsx`**: –£–ø—Ä–æ—â–µ–Ω, –æ—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∞ "–î–∞–ª–µ–µ"

## –°–æ–±—ã—Ç–∏—è:
- **`lesson_viewed`** - –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —É—Ä–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- **`lesson_completed`** - –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —É—Ä–æ–∫–∞ (–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞)
- –°–æ–±—ã—Ç–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `lesson_completions` —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏–Ω–¥–µ–∫—Å–æ–º
- –î–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ `lesson_viewed` —Ç–∞–∫–∂–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ `user_actions_log`

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:
1. –í –∞–¥–º–∏–Ω–∫–µ –ø–µ—Ä–µ–π—Ç–∏ –∫ –∫—É—Ä—Å—É
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å/—Å–Ω—è—Ç—å –≥–∞–ª–æ—á–∫—É "–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è"
3. –ü—Ä–∏ `completion_on = false` –≤—Å–µ —É—Ä–æ–∫–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã
4. –ü—Ä–∏ `completion_on = true` —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–≥–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

### –ü–µ—Ä–≤—ã–π —É—Ä–æ–∫:
- –£—Ä–æ–∫ —Å `sort_order = 1` –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω
- –û—Å—Ç–∞–ª—å–Ω—ã–µ —É—Ä–æ–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –ø–æ –ª–æ–≥–∏–∫–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Å –ø–æ–º–æ—â—å—é –º–æ–∫-–æ–±—ä–µ–∫—Ç–æ–≤ –∏ —é–Ω–∏—Ç —Ç–µ—Å—Ç–æ–≤:
- ‚úÖ –û—Ç–º–µ—Ç–∫–∞ —É—Ä–æ–∫–∞ –∫–∞–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω–æ–≥–æ
- ‚úÖ –û—Ç–º–µ—Ç–∫–∞ —É—Ä–æ–∫–∞ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–≥–æ (—Ç–µ—Å—Ç)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —É—Ä–æ–∫–æ–≤
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- ‚úÖ –ö—É—Ä—Å —Å –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º
- ‚úÖ –ü–µ—Ä–≤—ã–π —É—Ä–æ–∫ (sort_order = 1) –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ –£—Ä–æ–∫ —Å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º –ø—Ä–µ–¥—ã–¥—É—â–∏–º
- ‚úÖ **–ü–†–ê–í–ò–õ–¨–ù–ê–Ø –õ–û–ì–ò–ö–ê**: –£—Ä–æ–∫ —Å –∑–∞–¥–∞–Ω–∏—è–º–∏ –∑–∞–≤–µ—Ä—à–µ–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ç–µ—Å—Ç–∞
- ‚úÖ **–õ–û–ì–ò–ö–ê API**: –ü—Ä–æ—Å–º–æ—Ç—Ä —É—Ä–æ–∫–∞ —Å –∑–∞–¥–∞–Ω–∏–µ–º –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
- ‚úÖ **–Æ–ù–ò–¢ –¢–ï–°–¢–´**: –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –≤ `user_actions_log` –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- –°–æ–±—ã—Ç–∏–µ `lesson_viewed` –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ `user_actions_log` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–∫–æ–≤ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ `lesson_completions`
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:
- –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ `lesson_completions` —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç—Å—è
- –ú–æ–∂–Ω–æ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏

### üöÄ **–ü—Ä–æ—Å—Ç–æ—Ç–∞:**
- –û–¥–Ω–∞ –∑–∞–ø–∏—Å—å –Ω–∞ —É—Ä–æ–∫ –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö
- –õ–æ–≥–∏–∫–∞ –ø–æ–Ω—è—Ç–Ω–∞—è –∏ –Ω–∞–¥–µ–∂–Ω–∞—è

### üéØ **–ì–∏–±–∫–æ—Å—Ç—å:**
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–¥–∞–Ω–∏–π
- –ï—Å–ª–∏ –∫ —É—Ä–æ–∫—É –¥–æ–±–∞–≤—è—Ç –∑–∞–¥–∞–Ω–∏—è –ø–æ–∑–∂–µ, –æ–Ω –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–º
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–ø—Ä–æ—Ö–æ–¥–∏—Ç—å —É–∂–µ –∏–∑—É—á–µ–Ω–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª

### üîí **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:**
- –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
- –ü—Ä–æ—Å—Ç–∞—è –æ—Ç–ª–∞–¥–∫–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã lesson_completions

```sql
CREATE TABLE lesson_completions (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT REFERENCES users(id) ON DELETE CASCADE,
    lesson_id BIGINT REFERENCES lessons(id) ON DELETE CASCADE,
    completed_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    time_modified TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    time_created TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(user_id, lesson_id)
);
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –û–¥–Ω–∞ –∑–∞–ø–∏—Å—å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —É—Ä–æ–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫
- –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ —É—Ä–æ–∫–∞

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–ª–∞–≥–∞ `completion_on`**: –µ—Å–ª–∏ `False`, —É—Ä–æ–∫ –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–∫–∞**: –µ—Å–ª–∏ `sort_order = 1`, —É—Ä–æ–∫ –¥–æ—Å—Ç—É–ø–µ–Ω
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —É—Ä–æ–∫–∞**:
   - –ï—Å–ª–∏ –µ—Å—Ç—å –∑–∞–¥–∞–Ω–∏—è: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –∑–∞–ø–∏—Å–∏ –≤ `lesson_completions` (–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞)
   - –ï—Å–ª–∏ –Ω–µ—Ç –∑–∞–¥–∞–Ω–∏–π: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –∑–∞–ø–∏—Å–∏ –≤ `lesson_completions` (–ø—Ä–æ—Å–º–æ—Ç—Ä)

### –õ–æ–≥–∏–∫–∞ –∑–∞–ø–∏—Å–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:
- **`/api/lesson_viewed`**: –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è —É—Ä–æ–∫–æ–≤ –ë–ï–ó –∑–∞–¥–∞–Ω–∏–π
- **`/api/save_attempt`**: –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–ª—è —É—Ä–æ–∫–æ–≤ –° –∑–∞–¥–∞–Ω–∏—è–º–∏ (–ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ç–µ—Å—Ç–∞)

### –ü—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –£—Ä–æ–∫ —Å –∑–∞–¥–∞–Ω–∏–µ–º
- –£—Ä–æ–∫ 1 –∏–º–µ–µ—Ç —Ç–µ—Å—Ç
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç —É—Ä–æ–∫ ‚Üí –ù–ï –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ `lesson_completions`
- –£—Ä–æ–∫ 1 —Å—á–∏—Ç–∞–µ—Ç—Å—è –ù–ï –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–º (–Ω–µ—Ç –∑–∞–ø–∏—Å–∏)
- –£—Ä–æ–∫ 2 –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç–µ—Å—Ç ‚Üí –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ `lesson_completions`
- –£—Ä–æ–∫ 1 —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–º (–µ—Å—Ç—å –∑–∞–ø–∏—Å—å)
- –£—Ä–æ–∫ 2 —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –£—Ä–æ–∫ –±–µ–∑ –∑–∞–¥–∞–Ω–∏—è
- –£—Ä–æ–∫ 1 –Ω–µ –∏–º–µ–µ—Ç —Ç–µ—Å—Ç–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç —É—Ä–æ–∫ ‚Üí –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ `lesson_completions`
- –£—Ä–æ–∫ 1 —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–º (–µ—Å—Ç—å –∑–∞–ø–∏—Å—å)
- –£—Ä–æ–∫ 2 —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ö–∞—Å–∫–∞–¥–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
- –£—Ä–æ–∫ 1 –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω (–Ω–µ—Ç –∑–∞–ø–∏—Å–∏ –≤ `lesson_completions`)
- –£—Ä–æ–∫ 2 –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω (—É—Ä–æ–∫ 1 –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω)
- –£—Ä–æ–∫ 3 –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω (—É—Ä–æ–∫ 2 –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω)
- –ò —Ç–∞–∫ –¥–∞–ª–µ–µ...

## API Endpoints

### POST `/api/lesson_viewed`
–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —É—Ä–æ–∫–∞.

**–õ–æ–≥–∏–∫–∞:**
- –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ `lesson_viewed` –≤ `user_actions_log` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ `lesson_completions` —Ç–æ–ª—å–∫–æ –¥–ª—è —É—Ä–æ–∫–æ–≤ –ë–ï–ó –∑–∞–¥–∞–Ω–∏–π
- –î–ª—è —É—Ä–æ–∫–æ–≤ —Å –∑–∞–¥–∞–Ω–∏—è–º–∏ –∑–∞–ø–∏—Å—å –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ç–µ—Å—Ç–∞

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```json
{
    "lessonId": 123,
    "userId": 456
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
    "status": "success",
    "message": "Lesson viewed event triggered."
}
```

### POST `/api/save_attempt`
–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞ –∏ –æ—Ç–º–µ—á–∞–µ—Ç —É—Ä–æ–∫ –∫–∞–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π.

**–õ–æ–≥–∏–∫–∞:**
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ `quiz_attempts` –∏ `user_answers`
- –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ `lesson_completions` –¥–ª—è –æ—Ç–º–µ—Ç–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–∫–∞
- –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ `course_completed` –µ—Å–ª–∏ –≤—Å–µ —Ç–µ—Å—Ç—ã –∫—É—Ä—Å–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```json
{
    "quizId": 123,
    "courseId": 456,
    "answers": [...]
}
```

## –ê–¥–º–∏–Ω–∫–∞

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞–º–∏:
- –ü–æ–ª–µ `completion_on` - –≤–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `False` - –≤—Å–µ —É—Ä–æ–∫–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è–º–∏:
- –¢–∞–±–ª–∏—Ü–∞ `lesson_completions` –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –∞–¥–º–∏–Ω–∫–µ
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: ID, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —É—Ä–æ–∫, –≤—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
- –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–¥–∞–ª–µ–Ω–∏–µ (—Å–æ–∑–¥–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ)

## –§—Ä–æ–Ω—Ç–µ–Ω–¥

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É—Ä–æ–∫–æ–≤:
- –ú—å—é—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∏ –±–µ–π–¥–∂–∞ (opacity: 0.6-0.7)
- –ó–∞–º–µ–Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –Ω–∞ "–î–æ—Å—Ç—É–ø–Ω–æ –ø–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —É—Ä–æ–∫–∞"
- –ó–∞–º–µ–Ω–∞ —Å—Ç—Ä–µ–ª–∫–∏ –Ω–∞ –∏–∫–æ–Ω–∫—É –∑–∞–º–æ—á–∫–∞
- –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏

### –°—Ç–∏–ª–∏:
```css
.lesson-block--blocked { opacity: 0.6; }
.lesson-badge--blocked { opacity: 0.7; }
.lesson-card--blocked { 
    opacity: 0.6; 
    cursor: not-allowed; 
}
.lesson-title--blocked { color: #ffffff; }
```
